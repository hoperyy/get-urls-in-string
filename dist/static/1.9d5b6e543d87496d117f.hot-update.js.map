{"version":3,"sources":["webpack:///./workspace/c243d1097d25e0318ff2b426d7a48843/get-urls-in-string/src/index/index.js"],"names":["getUrlsInString","string","arr","match","multiArr","i","len","length","s","httpLastIndex","lastIndexOf","httpsLastIndex","finalLastIndex","Math","max","unshift","slice","rt","push","sort","a","b","analyzeStringByUrls","urls","type","content","url","split","getAnalyzedStringArr"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,SAASA,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B;AACA;AACA;AACA,QAAMC,MAAMD,OAAOE,KAAP,CAAa,oBAAb,KAAsC,EAAlD;;AAEA,QAAMC,WAAW,EAAjB;;AAEA,SAAK,IAAIC,IAAI,CAAR,EAAWC,MAAMJ,IAAIK,MAA1B,EAAkCF,IAAIC,GAAtC,EAA2CD,GAA3C,EAAgD;AAC5C;AACA,YAAIG,IAAIN,IAAIG,CAAJ,CAAR;;AAEA,YAAII,gBAAgBD,EAAEE,WAAF,CAAc,SAAd,CAApB;AACA,YAAIC,iBAAiBH,EAAEE,WAAF,CAAc,UAAd,CAArB;;AAEAN,iBAASC,CAAT,IAAc,EAAd;;AAEA,eAAOM,mBAAmB,CAAC,CAApB,IAAyBF,kBAAkB,CAAC,CAAnD,EAAsD;AAClD,gBAAMG,iBAAiBC,KAAKC,GAAL,CAASL,aAAT,EAAwBE,cAAxB,CAAvB;AACA;AACAP,qBAASC,CAAT,EAAYU,OAAZ,CAAoBP,EAAEQ,KAAF,CAAQJ,cAAR,CAApB;AACAJ,gBAAIA,EAAEQ,KAAF,CAAQ,CAAR,EAAWJ,cAAX,CAAJ;;AAEAH,4BAAgBD,EAAEE,WAAF,CAAc,SAAd,CAAhB;AACAC,6BAAiBH,EAAEE,WAAF,CAAc,UAAd,CAAjB;AACH;AACJ;;AAED,QAAMO,KAAK,EAAX;;AAEA,SAAK,IAAIZ,KAAI,CAAR,EAAWC,OAAMF,SAASG,MAA/B,EAAuCF,KAAIC,IAA3C,EAAgDD,IAAhD,EAAqD;AACjDY,WAAGC,IAAH,4CAAWd,SAASC,EAAT,CAAX;AACH;;AAED;AACAY,OAAGE,IAAH,CAAQ,UAACC,CAAD,EAAIC,CAAJ;AAAA,eAAUA,EAAEd,MAAF,GAAWa,EAAEb,MAAvB;AAAA,KAAR;;AAEA,WAAOU,EAAP;AACH;;AAED,SAASK,mBAAT,CAA6BC,IAA7B,EAAmCtB,MAAnC,EAA2C;AACvC,QAAI,CAACsB,IAAD,IAASA,KAAKhB,MAAL,IAAe,CAA5B,EAA+B;AAC3B,eAAO,CAAC,EAAEiB,MAAM,MAAR,EAAgBC,SAASxB,MAAzB,EAAD,CAAP;AACH;;AAED,QAAMyB,MAAMH,KAAK,CAAL,CAAZ;AACA,QAAMrB,MAAMD,OAAO0B,KAAP,CAAaD,GAAb,CAAZ;;AAEA,QAAIT,KAAK,EAAT;;AAEA,SAAK,IAAIZ,IAAI,CAAR,EAAWC,MAAMJ,IAAIK,MAA1B,EAAkCF,IAAIC,GAAtC,EAA2CD,GAA3C,EAAgD;AAC5CY,WAAGC,IAAH,4CAAWI,oBAAoBC,KAAKP,KAAL,CAAW,CAAX,CAApB,EAAmCd,IAAIG,CAAJ,CAAnC,CAAX;;AAEA,YAAIA,MAAMC,MAAM,CAAhB,EAAmB;AACfW,eAAGC,IAAH,CAAQ,EAAEM,MAAM,KAAR,EAAeC,SAASC,GAAxB,EAAR;AACH;AACJ;;AAED,WAAOT,EAAP;AACH;;AAED,SAASW,oBAAT,CAA8B3B,MAA9B,EAAsC;AAClC,WAAOqB,oBAAoBtB,gBAAgBC,MAAhB,CAApB,EAA6CA,MAA7C,CAAP;AACH;;kBAEc2B,oB","file":"1.9d5b6e543d87496d117f.hot-update.js","sourcesContent":["function getUrlsInString(string) {\n    // http://k.weidian.comhttps://k.weidian.com\n    // https://k.weidian.com\n    // http://k.weidian.com\n    const arr = string.match(/\\bhttps?:\\/\\/\\S+/gi) || [];\n\n    const multiArr = [];\n\n    for (let i = 0, len = arr.length; i < len; i++) {\n        // arr[i] 可能的值：http://k.weidian.comhttps://k.weidian.com、https://k.weidian.com、http://k.weidian.com\n        let s = arr[i];\n\n        let httpLastIndex = s.lastIndexOf('http://');\n        let httpsLastIndex = s.lastIndexOf('https://');\n\n        multiArr[i] = [];\n\n        while (httpsLastIndex !== -1 || httpLastIndex !== -1) {\n            const finalLastIndex = Math.max(httpLastIndex, httpsLastIndex);\n            // console.log(s, finalLastIndex);\n            multiArr[i].unshift(s.slice(finalLastIndex));\n            s = s.slice(0, finalLastIndex);\n\n            httpLastIndex = s.lastIndexOf('http://');\n            httpsLastIndex = s.lastIndexOf('https://');\n        }\n    }\n\n    const rt = [];\n\n    for (let i = 0, len = multiArr.length; i < len; i++) {\n        rt.push(...multiArr[i]);\n    }\n\n    // 排序，length 长的靠前\n    rt.sort((a, b) => b.length - a.length);\n\n    return rt;\n}\n\nfunction analyzeStringByUrls(urls, string) {\n    if (!urls || urls.length == 0) {\n        return [{ type: 'text', content: string }];\n    }\n\n    const url = urls[0];\n    const arr = string.split(url);\n\n    let rt = [];\n\n    for (let i = 0, len = arr.length; i < len; i++) {\n        rt.push(...analyzeStringByUrls(urls.slice(1), arr[i]));\n\n        if (i !== len - 1) {\n            rt.push({ type: 'url', content: url });\n        }\n    }\n\n    return rt;\n}\n\nfunction getAnalyzedStringArr(string) {\n    return analyzeStringByUrls(getUrlsInString(string), string);\n};\n\nexport default getAnalyzedStringArr;\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/c243d1097d25e0318ff2b426d7a48843/get-urls-in-string/src/index/index.js"],"sourceRoot":""}